- name: Create group
  become: true
  ansible.builtin.group:
    name: "{{ microk8s_user_group }}"
    state: present
- name: Add the user to appending the group 'microk8s'
  become: true
  ansible.builtin.user:
    name: "{{ microk8s_user_name }}"
    groups: "{{ microk8s_user_group }}"
    append: true
- name: Install snap
  become: true
  ansible.builtin.apt:
    name: "{{ microk8s_inst_packages }}"
    state: present
    update_cache: true
    lock_timeout: 300
  when: ansible_os_family == "Debian"
- name: Get public IP
  community.general.ipify_facts:
  timeout: 20
